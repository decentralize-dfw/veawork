<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VEA | Slim Link Viewer</title>
    <style>
        /* ÖZEL FONT TANIMLAMASI */
        @font-face {
            font-family: 'Telegrama Render';
            src: url('https://raw.githubusercontent.com/decentralize-dfw/font/main/vea.ttf') format('truetype');
            font-display: block;
        }

        :root {
            --vea-border: #000000;
            --vea-white: #ffffff;
            --menu-img: url('https://raw.githubusercontent.com/decentralize-dfw/vea-files/main/menu2.jpg');
            --header-h-desktop: 26px;
            --header-h-mobile: 44px;
            --vea-blue: #0061d5;
        }

        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            width: 100%;
            overflow: hidden;
            font-family: 'Telegrama Render', sans-serif;
            background-color: #000;
            cursor: auto;
        }

        #nav-container {
            position: fixed;
            top: 10px;
            left: 10px;
            width: 100px;
            z-index: 10000;
            display: flex;
            flex-direction: column;
            user-select: none;
        }

        #logo-link {
            width: 100px;
            margin-bottom: 5px;
            display: block;
        }

        #logo-img {
            width: 100%;
            height: auto;
            display: block;
        }

        .custom-dropdown {
            width: 100%;
            border: 1px solid var(--vea-border);
            background: var(--vea-white);
            position: relative;
            box-sizing: border-box;
            border-radius: 8px;
            transition: border-radius 0.1s;
        }

        .custom-dropdown.open {
            border-radius: 8px 8px 0 0;
            background-image: var(--menu-img);
            background-size: 100px auto;
            background-position: top center;
            background-repeat: no-repeat;
            border-bottom: none;
        }

        .dropdown-header {
            padding: 0 6px;
            font-weight: bold;
            font-size: 9px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: var(--header-h-desktop);
            box-sizing: border-box;
            text-transform: uppercase;
            position: relative;
            z-index: 2;
        }

        .custom-dropdown.open .dropdown-header {
            color: #fff;
            text-shadow: 1px 1px 2px #000;
        }

        .arrow-icons {
            background-image: var(--menu-img);
            background-size: 100px auto;
            background-position: right top;
            color: white;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            font-size: 6px;
            width: 22px;
            height: 100%;
            border-left: 1px solid var(--vea-border);
            position: absolute;
            right: 0;
            top: 0;
            border-radius: 0 7px 7px 0;
            text-shadow: 1px 1px 1px #000;
        }

        .custom-dropdown.open .arrow-icons {
            border-radius: 0 7px 0 0;
            background-position: right top;
        }

        .arrow-icons i {
            font-style: normal;
            line-height: 1;
        }

        .dropdown-list {
            display: none;
            list-style: none;
            margin: 0;
            padding: 0;
            border: 1px solid var(--vea-border);
            background-image: var(--menu-img);
            background-size: 100px auto;
            background-repeat: no-repeat;
            background-position: center calc(var(--header-h-desktop) * -1); 
            width: calc(100% + 2px);
            position: absolute;
            left: -1px;
            top: calc(var(--header-h-desktop) - 1px); 
            box-sizing: border-box;
            border-radius: 0 0 8px 8px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
            z-index: 1;
            overflow: hidden;
        }

        .dropdown-list li {
            padding: 8px 6px;
            font-weight: bold;
            font-size: 9px;
            color: #000;
            text-transform: uppercase;
            border-bottom: 1px solid rgba(0,0,0,0.1);
            background: var(--vea-white);
            transition: background 0.05s ease;
        }

        .dropdown-list li:last-child {
            border-bottom: none;
        }

        .dropdown-list li:hover {
            background: transparent;
            color: #fff;
            text-shadow: 1px 1px 3px #000;
        }

        /* FOOTER ŞERİDİ */
        #footer-info {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 30px;
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
            color: black;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            z-index: 10000;
            white-space: nowrap;
            letter-spacing: 0.5px;
            pointer-events: none;
        }

        #footer-info a {
            pointer-events: auto;
            text-decoration: none;
            color: inherit;
        }

        /* SAĞ ALT LEGAL NOTICE */
        #legal-notice {
            position: fixed;
            bottom: 11px;
            right: 15px;
            font-size: 8px;
            z-index: 10001;
            color: black;
            user-select: none;
        }

        #legal-notice a {
            text-decoration: none;
            color: inherit;
            cursor: pointer;
            pointer-events: auto;
        }

        /* ÇEREZ ONAY BANDI */
        #cookie-consent {
            position: fixed;
            bottom: 40px;
            left: 10px;
            background: var(--vea-white);
            border: 1px solid var(--vea-border);
            padding: 6px 10px;
            font-size: 8px;
            border-radius: 8px;
            z-index: 10002;
            display: none;
            align-items: center;
            gap: 10px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            backdrop-filter: blur(5px);
            background: rgba(255,255,255,0.7);
        }

        .cookie-btn {
            background: none;
            border: 1px solid var(--vea-border);
            padding: 2px 6px;
            font-family: inherit;
            font-size: 8px;
            cursor: pointer;
            border-radius: 4px;
            text-transform: uppercase;
        }

        .cookie-btn:hover {
            background: var(--vea-border);
            color: #fff;
        }

        .cookie-btn.yes {
            background: var(--vea-blue);
            color: #fff;
            border-color: var(--vea-blue);
        }

        /* MOBİL TASARIM */
        @media (max-width: 576px) {
            #nav-container {
                top: 0;
                left: 0;
                width: 100%;
                flex-direction: row;
                align-items: stretch;
                background: var(--vea-white);
                border-bottom: 1px solid var(--vea-border);
            }
            #logo-link {
                width: 50%;
                margin-bottom: 0;
                display: flex;
                align-items: center;
                padding: 0 10px;
                box-sizing: border-box;
            }
            #logo-img { max-height: 20px; width: auto; }
            .custom-dropdown {
                width: 50%;
                border: none;
                border-left: 1px solid var(--vea-border);
                border-radius: 0 !important;
                background: transparent;
            }
            
            .custom-dropdown.open { 
                background-image: var(--menu-img);
                background-size: 100% auto;
                background-position: top center;
                color: #fff;
            }
            
            .dropdown-header { height: var(--header-h-mobile); font-size: 11px; padding-right: 44px; }
            .arrow-icons { 
                width: 44px; 
                border-radius: 0; 
                background-size: 50vw auto;
                background-position: right top;
            }
            
            .dropdown-list {
                top: var(--header-h-mobile);
                position: fixed;
                left: 50%;
                width: 50%;
                border-radius: 0;
                background-image: var(--menu-img);
                background-size: 100% auto;
                background-repeat: no-repeat;
                background-position: center calc(var(--header-h-mobile) * -1);
            }
            .dropdown-list li { padding: 16px 10px; font-size: 13px; }

            #legal-notice {
                font-size: 7px;
                right: 10px;
                bottom: 10px;
            }

            #cookie-consent {
                bottom: 40px;
                left: 5%;
                width: 90%;
                justify-content: space-between;
                font-size: 7px;
            }
        }
    </style>
</head>
<body>

    <div id="nav-container">
        <div id="logo-link">
            <img id="logo-img" src="https://raw.githubusercontent.com/decentralize-dfw/vea-files/main/veacrop.png" alt="VEA Logo">
        </div>

        <div class="custom-dropdown" id="dropdown-toggle">
            <div class="dropdown-header" id="current-selection-header">
                HOME
                <span class="arrow-icons">
                    <i class="up">▲</i>
                    <i class="down">▼</i>
                </span>
            </div>
            
            <ul class="dropdown-list" id="dropdown-list">
                <li onclick="loadPage(event, 'HOME', 'https://virtuallyeverafter.work')">HOME</li>
                <li onclick="loadPage(event, 'VEA XYZ', 'https://virtuallyeverafter.xyz')">VEA XYZ</li>
                <li onclick="loadPage(event, 'VEA 93', 'https://decentralize-dfw.github.io/virtuallyeverafter-93/')">VEA 93</li>
                <li onclick="loadPage(event, 'DE-CENTRALIZE', 'https://de-centralize.com')">DE-CENTRALIZE</li>
            </ul>
        </div>
    </div>

    <!-- Iframe Container -->
    <div id="iframe-wrapper" style="width:100%; height:100%; position:absolute; top:0; left:0;">
        <iframe id="content-viewer" src="https://virtuallyeverafter.work" title="Content Viewer" style="position:absolute; top:0; left:0; width:100%; height:100%; border:none; z-index:1;"></iframe>
    </div>

    <!-- Çerez Onay Bandı -->
    <div id="cookie-consent">
        <span>WE USE COOKIES</span>
        <div style="display:flex; gap:5px;">
            <button class="cookie-btn yes" onclick="handleCookie(true)">YES</button>
            <button class="cookie-btn" onclick="handleCookie(false)">NO</button>
        </div>
    </div>

    <div id="footer-info">
        <a href="mailto:hello@virtuallyeverafter.xyz">hello@virtuallyeverafter.xyz</a> &emsp;&emsp; Luxembourg &emsp;&emsp; +352 661953108
    </div>

    <div id="legal-notice">
        <a href="https://virtuallyeverafter.work/legal" target="_blank">legal notice and terms of use</a>
    </div>

    <script>
        const dropdownToggle = document.getElementById('dropdown-toggle');
        const dropdownList = document.getElementById('dropdown-list');
        const headerText = document.getElementById('current-selection-header');
        const iframeWrapper = document.getElementById('iframe-wrapper');
        const cookieBanner = document.getElementById('cookie-consent');

        const GA_MEASUREMENT_ID = 'G-K3BPJJFP5C';

        // Analytics fonksiyonunu window seviyesinde tanımla
        window.dataLayer = window.dataLayer || [];
        function gtag(){window.dataLayer.push(arguments);}

        window.addEventListener('load', () => {
            const consent = localStorage.getItem('vea_cookie_consent');
            if (consent === null) {
                cookieBanner.style.display = 'flex';
            } else if (consent === 'true') {
                initAnalytics();
            }
        });

        function handleCookie(accepted) {
            localStorage.setItem('vea_cookie_consent', accepted);
            cookieBanner.style.display = 'none';
            if (accepted) {
                initAnalytics();
            }
        }

        function initAnalytics() {
            if (!document.getElementById('ga-script')) {
                const script = document.createElement('script');
                script.id = 'ga-script';
                script.async = true;
                script.src = `https://www.googletagmanager.com/gtag/js?id=${GA_MEASUREMENT_ID}`;
                document.head.appendChild(script);

                gtag('js', new Date());
                gtag('config', GA_MEASUREMENT_ID, {
                    'page_path': window.location.pathname
                });
                console.log("Analytics initialized.");
            }
        }

        function trackPageView(pageName) {
            if (localStorage.getItem('vea_cookie_consent') === 'true' && typeof gtag === 'function') {
                gtag('event', 'page_view', {
                    page_title: pageName,
                    page_location: window.location.href,
                    page_path: '/' + pageName.toLowerCase()
                });
            }
        }

        dropdownToggle.addEventListener('click', function(e) {
            const isVisible = dropdownList.style.display === 'block';
            if (isVisible) {
                dropdownList.style.display = 'none';
                dropdownToggle.classList.remove('open');
            } else {
                dropdownList.style.display = 'block';
                dropdownToggle.classList.add('open');
            }
        });

        function loadPage(event, name, url) {
            event.stopPropagation();
            const oldViewer = document.getElementById('content-viewer');
            if (oldViewer) {
                oldViewer.src = "about:blank";
                oldViewer.remove();
            }

            const newViewer = document.createElement('iframe');
            newViewer.id = 'content-viewer';
            newViewer.title = 'Content Viewer';
            newViewer.style.position = 'absolute';
            newViewer.style.top = '0';
            newViewer.style.left = '0';
            newViewer.style.width = '100%';
            newViewer.style.height = '100%';
            newViewer.style.border = 'none';
            newViewer.style.zIndex = '1';
            
            iframeWrapper.appendChild(newViewer);
            newViewer.src = url;
            
            headerText.innerHTML = `
                ${name}
                <span class="arrow-icons">
                    <i class="up">▲</i>
                    <i class="down">▼</i>
                </span>
            `;
            dropdownList.style.display = 'none';
            dropdownToggle.classList.remove('open');

            trackPageView(name);
        }

        window.onclick = function(event) {
            if (!event.target.closest('#nav-container')) {
                dropdownList.style.display = 'none';
                dropdownToggle.classList.remove('open');
            }
        }
    </script>
</body>
</html>
